@inject SiteSettingsService SettingsService

@{
    var settings = SettingsService.GetSettings();
}

<link href="~/css/site.css" rel="stylesheet" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

<style>
    .about-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 40px;
        margin: 40px auto;
        max-width: 1200px;
    }

    .about-card {
        background: rgba(15, 32, 39, 0.85);
        backdrop-filter: blur(12px);
        border-radius: 20px;
        padding: 20px;
        width: 100%;
        max-width: 800px;
        color: #e2e8f0;
        box-shadow: 0 10px 40px rgba(0,0,0,.6);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

        .about-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0,0,0,.7), 0 0 30px #38bdf8;
        }

    .about-logo {
        width: 200px;
        height: 200px;
        margin: 0 auto 20px auto;
        border-radius: 50%;
        overflow: hidden;
        border: 2px solid #38bdf8;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #0b0f1a;
    }

        .about-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

    .site-name {
        text-align: center;
        font-size: 2rem;
        font-weight: 700;
        color: #38bdf8;
        text-shadow: 0 0 10px rgba(56,189,248,.6);
        margin-bottom: 20px;
    }

    .company-info {
        text-align: center;
        font-size: 1rem;
        color: #94a3b8;
    }

        .company-info label {
            display: block;
            margin: 5px 0;
        }

        .company-info .address {
            display: inline-block;
            max-width: 350px; 
            word-wrap: break-word;
            white-space: normal;
            margin: 5px auto;
        }

    .social-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
    }

        .social-links a {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 50px;
            height: 50px;
            border-radius: 10px;
            color: white;
            font-size: 24px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

            .social-links a:hover {
                transform: scale(1.2) rotate(10deg);
                box-shadow: 0 0 15px rgba(255,255,255,0.6);
            }

    #map {
        width: 100%;
        max-width: 800px;
        height: 450px;
        border-radius: 20px;
        overflow: hidden;
        border: 2px solid rgba(56,189,248,0.6);
        box-shadow: 0 10px 40px rgba(0,0,0,0.6), inset 0 0 0 1px rgba(255,255,255,0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

        #map:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.7), 0 0 30px #38bdf8;
        }

    .leaflet-popup-content {
        max-width: 350px;
        font-size: 1rem;
        line-height: 1.5;
    }
</style>

<div class="about-container">
    <div class="about-card">
        <div class="about-logo">
            @if(settings.siteLogo==null){
                settings.siteLogo = "default_logo.png";
            }
            <img src="~/images/site/@settings.siteLogo" alt="Logo" />
        </div>
        <div class="site-name">@settings.siteName</div>
        <div class="company-info">
            <label><strong>Telefon :</strong> @settings.companyPhone</label>
            <label><strong>E-Posta :</strong> @settings.companyEmail</label>
            <label class="address"><strong>Adres :</strong> @settings.companyAddress</label>
        </div>
        <div class="social-links">
            @if (settings.igOK)
            {
                <a href="@settings.igLink" target="_blank"><i class="fab fa-instagram"></i></a>
            }
            @if (settings.xOK)
            {
                <a href="@settings.xLink" target="_blank"><i class="fab fa-x-twitter"></i></a>
            }
            @if (settings.fbOK)
            {
                <a href="@settings.fbLink" target="_blank"><i class="fab fa-facebook-f"></i></a>
            }
            @if (settings.ytOK)
            {
                <a href="@settings.ytLink" target="_blank"><i class="fab fa-youtube"></i></a>
            }
        </div>
    </div>

    <div id="map"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const myLocation = [
            @settings.latitude.ToString(System.Globalization.CultureInfo.InvariantCulture),
            @settings.longitude.ToString(System.Globalization.CultureInfo.InvariantCulture)
        ];

        const map = L.map('map').setView(myLocation, 15);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
        }).addTo(map);

        L.marker(myLocation).addTo(map)
            .bindPopup(`<b>@settings.siteName</b><br>@settings.companyPhone<br>@settings.companyEmail`, {
                maxWidth: 350
            })
            .openPopup();
    });
</script>
